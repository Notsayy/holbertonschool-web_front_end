<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Task 6</title>

    <script
      src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
      integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
      crossorigin="anonymous"
    ></script>
    <script type="application/javascript">
      function createFamilyTree() {
        $('body').append(
          $('<table>')
            .append(
              $('<thead>').append(
                $('<tr>').append(
                  $('<th>').text('Firstname'),
                  $('<th>').text('Lastname')
                )
              )
            )
            .append($('<tbody>'))
        );
      }

      function addNewMember(firstName, lastName, position) {
        var rm = $('<td>').text('(x)').css('background-color', 'orange');
        var row = $('<tr>').append(
          $('<td>').text(firstName),
          $('<td>').text(lastName),
          rm
        );

        rm.click(function () {
          row.remove();
        });

        if (position === 'before') {
          $('tbody').prepend(row);
        } else {
          $('tbody').append(row);
        }
      }

      function createForm() {
        var form = $('<form></form>')
          .append('<input type="text" placeholder="Firstname">')
          .append('<input type="text" placeholder="Lastname">')
          .append(
            $('<select>')
              .append('<option value="before">Before</option>')
              .append('<option value="after">After</option>')
          )
          .append('<input type="submit" value="Add member">');

        form.submit(function (e) {
          e.preventDefault();
          var firstName = form.find('input[type="text"]:first').val();
          var lastName = form.find('input[type="text"]:nth-of-type(2)').val();
          var position = form.find('select').val();
          addNewMember(firstName, lastName, position);
          form.find('input[type="text"]').val('');
        });

        $('body').prepend(form);
      }

      $(document).ready(function () {
        createFamilyTree();
        createForm();
        addNewMember('Guillaume', 'Salva', 'after');
        addNewMember('Arielle', 'Snizt', 'after');
        addNewMember('Fanette', 'Snizt', 'after');
        addNewMember('Gerard', 'Snizt', 'after');
        addNewMember('Victor', 'Salva', 'after');
      });
    </script>
  </head>
  <body></body>
</html>
